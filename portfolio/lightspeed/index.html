
<!DOCTYPE html><html class=''>
<head>
<title>Travel at light speed</title>
<style class="matikbird">html, body, canvas {
  margin: 0;
  width: 100%;
  height: 100%;
  display: block;
  position: absolute;
  top: 0;
  left: 0;
}</style></head><body>
<!-- Click to travel at light speed --><script src='https://cdnjs.cloudflare.com/ajax/libs/three.js/r79/three.min.js'></script>
<script>
</script>
<script>var mouse = {
  x: window.innerWidth / 2,
  y: window.innerHeight / 2
}
//access mouse pos with mouse.x and mouse.y
function getMousePos(event) {
  return {
    x: event.clientX,
    y: event.clientY
  }
}
window.addEventListener('mousemove', function(event) {
  mouse = getMousePos(event)
})
var scene = new THREE.Scene();
scene.fog = new THREE.Fog('#000000', 750, 1000);
			var camera = new THREE.PerspectiveCamera( 45, window.innerWidth/window.innerHeight, 0.1, 1000 );

			var renderer = new THREE.WebGLRenderer();
			renderer.setSize( window.innerWidth, window.innerHeight );
			document.body.appendChild( renderer.domElement );
      //Create elements here:
function randint(min, max) {
  return Math.floor(Math.random() * max) + min
}
function int(num) {
  return Math.floor(num)
}
      var stars = []
      var starCount = 1000
      var asteroids = []
      var asteroidCount = 10
      var asteroidSpawn = 100
      var cameraZ = 0
      function newStar() {
        gr = {}
        gr['geometry'] = new THREE.SphereGeometry( 1, 8, 8 )
			 gr['material'] = new THREE.MeshBasicMaterial( { color: 'white'} );
			gr['sphere'] = new THREE.Mesh( gr['geometry'], gr['material'] );
        scene.add(gr['sphere'])
        w = window.innerWidth
        h = window.innerHeight
        w2 = w / 2
        h2 = h / 2
        gr['sphere'].position.x = randint(-w2, w)
        gr['sphere'].position.y = randint(-h2, h)
        gr['sphere'].position.z = cameraZ - 1000
        return gr
      }
function newAsteroid() {
        gr = {}
        gr['geometry'] = new THREE.SphereGeometry( 1, randint(3, 5), randint(2, 5) )
			 gr['material'] = new THREE.MeshBasicMaterial( { color: 'gray'} );
			gr['shape'] = new THREE.Mesh( gr['geometry'], gr['material'] );
        scene.add(gr['shape'])
        w = window.innerWidth
        h = window.innerHeight
        w2 = w / 2
        h2 = h / 2
        gr['shape'].position.x = randint(-w2 / 100, w / 100)
        gr['shape'].position.y = randint(-h2 / 100, h / 100)
        gr['shape'].position.z = cameraZ - 1000
        gr['shape'].scale.x = randint(1, 3)
        gr['shape'].scale.y = randint(1, 3)
        gr['shape'].scale.z = randint(1, 3)
        return gr
      }
function towards(ax, ay, bx, by, speed) {
  steps_number = Math.max(Math.abs(bx - ax), Math.abs(by - ay))
  stepx = parseFloat(bx - ax) / steps_number
  stepy = parseFloat(by - ay) / steps_number
  return [int(ax + stepx * speed), 
          int(ay + stepy * speed)]
}
var lightSpeed = 1
var speedStop = false
function lightS() {lightSpeed = 2}
window.addEventListener("click", lightS, false);
      //end of elements
			camera.position.z = cameraZ;

			var render = function () {
				requestAnimationFrame( render );
        mainloop()
				renderer.render(scene, camera);
			};
function mainloop() {
  if (stars.length < starCount) {
    stars.push(newStar())
  }
  if (asteroids.length < asteroidCount) {
    asteroidSpawn -= 1
    if (asteroidSpawn == 0) {
    asteroids.push(newAsteroid())
      asteroidSpawn = 100
    }
  }
  for (var i = 0; i < stars.length; i++) {
    star = stars[i]
    if(star['sphere'].position.z > cameraZ) {
      scene.remove(star['sphere'])
      stars.splice(i, 1)
    }
    star['sphere'].scale.z = lightSpeed
  }
  for (var i = 0; i < asteroids.length; i++) {
    asteroid = asteroids[i]
    if(asteroid['shape'].position.z > cameraZ) {
      scene.remove(asteroid['shape'])
      asteroids.splice(i, 1)
    }
    asteroid['shape'].rotation.x += 0.01
    asteroid['shape'].rotation.y += 0.01
  }
  if (speedStop == false) {
  if (lightSpeed > 1) {
    lightSpeed += 2
  }
    if (lightSpeed > 300) {
      speedStop = true
    }
  }
  else {
    lightSpeed -= 5
    if (lightSpeed < 2) {
      speedStop = false
      lightSpeed = 1
    }
  }
  if (lightSpeed > 150) {
    cameraZ -= lightSpeed / 2
  } else {
  cameraZ -= 1
  }
  //camera.position.z = cameraZ
  lookX = mouse.x - window.innerWidth / 2
  lookX /= 50
  lookX = -lookX
  lookY = mouse.y - window.innerHeight / 2
  lookY /= 50
  //lookY = -lookY
  lookAt = new THREE.Vector3(lookX, lookY, cameraZ - 10);
  camera.position.z = cameraZ
  camera.lookAt(lookAt);
  
}
			render();

//# sourceURL=matikbird.js
</script>
</body></html>